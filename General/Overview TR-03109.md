
| Dokument / Version                                            | Kernaussage & typische Inhalte                                                                                                                                              | Nutzen in Simluator                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| ------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **TR-03109-1 „Smart-Meter-Gateway – Kommunikations­einheit“** | - Architektur- & Prozessmodell (LMN, HAN, WAN) - Pflicht­funktionen: InfoReport, TAF-Flows, CLS/EMS-Kanäle - Schutzziele + nicht-funktionale Vorgaben (Zeit, Verfügbarkeit) | _Pflichtenheft_ für alle Kommunikations- & Sicherheits­anforderungen, die dein Cyber-Simulator nachbilden muss; liefert außerdem die Angriffs­flächen (TLS, CMS, DoS…) als Basis für Threat-Cases. ([BSI](https://www.bsi.bund.de/EN/Themen/Unternehmen-und-Organisationen/Standards-und-Zertifizierung/Smart-metering/Smart-Meter-Gateway/TechnRichtlinie/TR-03109-1.html?utm_source=chatgpt.com "Technical Guideline TR-03109-1: Smart Meters - BSI"))                                                                                                                                                                                                              |
| **TR-03109-2 „Sicherheits­modul (SM)“**                       | - Hard-/Firmware-Anforderungen an das Secure Element - Schlüssel­lebens­zyklus, True-Random-Gen, sicheres Booten                                                            | Wenn du im Testbed Hardware-Roots of Trust emulierst oder Schlüssel­handling modellierst; liefert Threat-Vectors gegen Schlüsselmaterial. ([BSI](https://www.bsi.bund.de/EN/Themen/Unternehmen-und-Organisationen/Standards-und-Zertifizierung/Smart-metering/Sicherheitsmodul/TechnRichtlinie/TR_03109-2.html?utm_source=chatgpt.com "TR-03109-2: Requirements for Security Module Functionality ... - BSI"))                                                                                                                                                                                                                                                        |
| **TR-03109-3 „Krypto­graphische Vorgaben“**                   | - Zulässige Algorithmen (ECDHE_P256, AES-GCM-256 …) - Mindest­schlüssel­längen, Hash-Funktionen - Vorgaben für CMS-Container                                                | Legt die Crypto-Policy fest, die du in allen simulierten TLS-, CMS- und Firmware-Signatur-Pfaden umsetzen bzw. brechen musst. ([BSI](https://www.bsi.bund.de/EN/Themen/Unternehmen-und-Organisationen/Standards-und-Zertifizierung/Smart-metering/Kryptographische-Vorgaben/kryptographische-vorgaben.html?utm_source=chatgpt.com "TR-03109-3: Cryptographic Specifications - BSI"))                                                                                                                                                                                                                                                                                  |
| **TR-03109-4 „Smart-Meter-PKI (SM-PKI)“**                     | - Hierarchie, Rollen & Zertifikats­profile - OCSP / CRL-Handling, Audit-Events                                                                                              | Für Zertifikats- und Revocation-Flows in der Kommunikations­simulation (mutual TLS, CMS-Signing, OCSP-DoS-Szenarien). ([BSI](https://www.bsi.bund.de/EN/Themen/Unternehmen-und-Organisationen/Standards-und-Zertifizierung/Smart-metering/Smart-Meterin-PKI/TechnRichtlinie/tr_03109-4.html?utm_source=chatgpt.com "TR-03109-4: Smart Metering PKI - BSI"))                                                                                                                                                                                                                                                                                                           |
| **TR-03109-5 „CLS-/Steuerbox-Adapter“**                       | - Spezifiziert zusätzliche System­einheiten für netzbezogene Steuerung (EEBus, Modbus-TCP usw.)                                                                             | Liefert Use-Cases & Security­frames für aktive Eingriffe ins simulierte Netz (Set-Points, Last­trennung). ([ENQT](https://enqt.de/en/blog/the-tr-03109-5-directive-a-milestone-for-smart-meter-technology/?utm_source=chatgpt.com "The TR-03109-5 guideline: Safety and standardisation - ENQT"))                                                                                                                                                                                                                                                                                                                                                                     |
| **TR-03109-6 „Gateway-Admin & Betrieb“**                      | - Prozesse & ISMS-Pflichten für den Gateway-Administrator - Logs, Update-Pfad, Auslagerung an Dienst­leister                                                                | Wichtig, wenn du Betriebs-/Log-Workflows oder Supply-Chain-Bedrohungen abbilden willst. ([BSI](https://www.bsi.bund.de/EN/Themen/Unternehmen-und-Organisationen/Standards-und-Zertifizierung/Smart-metering/Administration-und-Betrieb/FAQ/faqsmg.html?utm_source=chatgpt.com "Frequently Asked Questions About TR-03109-6 and Smart Meter ..."))                                                                                                                                                                                                                                                                                                                     |
| **TR-03109-TS-1 / TS-2 (Test­spez.)**                         | - Positiv-/Negativ-Testfälle zu -1 und -2 - Prüfkatalog + Fehlermeldungs-IDs                                                                                                | Vorlage für deine automatisierten Szenario-Skripte (DAC-Testfälle, Schema-Errors, DoS …). ([BSI](https://www.bsi.bund.de/EN/Themen/Unternehmen-und-Organisationen/Standards-und-Zertifizierung/Smart-metering/Smart-Meter-Gateway/Testspezifikation/testspezifikation_TR_03109-1_node.html?utm_source=chatgpt.com "Test specification for Technical Guideline TR-03109-1 - BSI"), [BSI](https://www.bsi.bund.de/EN/Themen/Unternehmen-und-Organisationen/Standards-und-Zertifizierung/Smart-metering/Sicherheitsmodul/Testspezifikation/testspezifikation_TR_03109-2_node.html?utm_source=chatgpt.com "Test Specification for Technical Guideline TR-03109-2 - BSI")) |
| **PP-0073 (SMGW) & PP-0077 (SM)**                             | - Angreifer­modell, TOE-Grenzen, Security Assurance Reqs.                                                                                                                   | Enthalten schon eine Bedrohungs­liste (T.Disclosure, T.FDI, …); perfekt als Startpunkt für deine Threat-Matrix. ([Common Criteria Portal](https://commoncriteriaportal.org/files/ppfiles/pp0077V2b_pdf.pdf?utm_source=chatgpt.com "[PDF] Protection Profile for the Security Module of a Smart Meter Gateway ..."))                                                                                                                                                                                                                                                                                                                                                   |
| **FNN-Lastenheft „Funktionale Merkmale“**                     | - Marktrollen­neutraler Funktions­umfang SMGW - Ergänzt TR-Lücken (Zähler­wechsel, Monitoring)                                                                              | Setzt das Fach-Lastenheft für physische & logische Funktionen – wichtig für Netz-Simulator-Scope. ([Topics](https://www.vde.com/de/fnn/arbeitsgebiete/digitalisierung-metering/alle-unterlagen-auf-einen-blick?utm_source=chatgpt.com "Alle Unterlagen von VDE FNN - Intelligentes Messsystem"))                                                                                                                                                                                                                                                                                                                                                                      |
| **FNN-Lastenheft „Mikroprozesse“ (+ ZIP)**                    | - REST-Ressourcen, XSD/JSON-Schemas, InfoReport-DS - Beispiel-Files & ICS-Templates                                                                                         | Datensatz-Quelle für deine Kommunikations­simulation (Schema-Validation, Payload-Generator). ([Topics](https://www.vde.com/resource/blob/2325638/aa0f83cd104543397d57d66067c856c8/vde-fnn-testfallspezifikationen-smart-meter-gateway-mikroprozesse-v1-1-data.pdf?utm_source=chatgpt.com "[PDF] vde-fnn-testfallspezifikationen-smart-meter-gateway-mikroprozesse ..."))                                                                                                                                                                                                                                                                                              |
| **FNN-Testfall­spezifikationen**                              | - Viele Testcases für Mikroprozesse & Funktionale Merkmale                                                                                                                  | Direkt wiederverwendbar als Test-Harness in der Co-Simulation. ([Topics](https://www.vde.com/resource/blob/2325638/aa0f83cd104543397d57d66067c856c8/vde-fnn-testfallspezifikationen-smart-meter-gateway-mikroprozesse-v1-1-data.pdf?utm_source=chatgpt.com "[PDF] vde-fnn-testfallspezifikationen-smart-meter-gateway-mikroprozesse ..."))                                                                                                                                                                                                                                                                                                                            |
| **OMS-/M-BUS-Spezifikationen**                                | - Verfahren zur TAF-7-Auslesung im LMN                                                                                                                                      | Wenn dein LV-Simulator auch M-BUS-Endgeräte oder Funk­module einbindet. ([Open Metering System Group](https://oms-group.org/en/specification/?utm_source=chatgpt.com "Specification - Open Metering System Group - oms-group.org"))                                                                                                                                                                                                                                                                                                                                                                                                                                   |

## What is it useful for
Soweit ich das sehen konnte ist es vor allem fuer die Kommunikationssimulationsebene wichtig, also alles was Software betrifft wird damit abgedeckt. Was noch fehlt sind passende Normen um einheitliche Objekt-IDs und Attribute fuer die Netzelemente zu definieren. Diese sollen angeblich im Common Information Model (CIM) ueber IEC 61970/61968 definiert sein, aber da habe ich kein Zugriff drauf, da die hinter einer Paywall liegen. 

Dazu ist aber auch noch zu sagen, dass in TR-03109-5 Kommunikationsadapter auch einwenig Hardware definiert wird, genauer wie die Bindung an die CLS-Steuerung umgesetzt werden soll. 

## Was noch fehlt
Wenn ich das alles richtig erkannt habe, dann definiert die TR-03109, ein bisschen wie der Name schon andeuten laesst, die Bits & Bytes, wenn man es so nennen will. Also die Protokolle, Verschluesselungen und Schutzziele rund ums Smart-Meter-Gateway und daraus resultierenden Smart-Grids. Was wir aber noch brauchen sind die folgenden Punkte:
- eletrische Referenznetze ([CIGRE](https://www.cigre.org/), IEEE)
- deutsche Grid-Code (VDE-AR-N 4105 [Power Generating Plants in the Low Voltage Network](https://www.vde.com/en/fnn/topics/technical-connection-rules/power-generating-plants)/4110 [Technical Connection Rules for Medium-Voltage](https://www.vde.com/en/fnn/topics/technical-connection-rules/tcr-for-medium-voltage))
- Geraete- & Steuerprotokolle ([SunSpec](https://sunspec.org/), [IEC 61850](https://en.wikipedia.org/wiki/IEC_61850))
- Co-Simulator-Frameworks und einen erweiterten Threat-Katalog

## Was zu beachten ist fuer Deutschland
- Kommunikation: Hier reicht erstmal TR-03109, da wir auch keine Marktfluesse abbilden wollen, sollte dies alles abdeken
- Physik: Hier brauchen wir wie oben die VDE-AR-N 4105 (LV) und 4110 (MV), das [BDEW-Lastprofile](https://www.bdew.de/energie/standardlastprofile-strom/) ist noch hilfreich um ein deutsches Verhalten zu erhalten
- **Security/Complicane**: [IT-SiG 2.0](https://www.bsi.bund.de/EN/Das-BSI/Auftrag/Gesetze-und-Verordungen/IT-SiG/2-0/it_sig-2-0_node.html), [KRITIS-Verordnung](https://www.gesetze-im-internet.de/bsi-kritisv/BJNR095800016.html), [BDEW-ICS Whitepaper](https://www.bdew.de/media/documents/BDEW-OE-VSE-Whitepaper-3.0.pdf) ergaenzen die TR-03109 um weitere Threat-Basen aufzustellen]


## TAF vs TAC
Sie hängen zusammen, benennen aber zwei unterschiedliche Dinge:

|Kürzel|Offizielle Bedeutung|Rolle im SMGW-Kosmos|
|---|---|---|
|**TAF**|**T**arif-**A**nwendungs-**F**all (Nummern 1 … 15)|_Fachlicher Use Case_ aus MsbG/BSI-Verordnung – z. B.  <br>• **TAF 7**: registrierende Messung KW/h  <br>• **TAF 14**: hochfrequente Messwertbereitstellung (≤ 60 s)|
|**TAC**|meist in Hersteller- oder FNN-Dokus als **T**arif-**A**nwendungsfall-**C**ontainer|_Technischer Payload-Behälter_, der Messwerte eines bestimmten TAF umfasst – konkret das JSON-/XML-Objekt, das der InfoReport überträgt. Beispiel: ein „TAC-14“-JSON ist der Container, der alle Sekundärwerte für **TAF 14** transportiert.|

### Was bedeutet das praktisch?
- **TAF** beschreibt **was** fachlich geliefert werden muss (Intervall, Granularität, Rechenregeln).
- **TAC** beschreibt **wie** dieselben Werte **verpackt** sind, wenn sie das Gateway verlassen (Feldnamen, Datentypen, OBIS-Mapping).

> Wenn also ein Hersteller sagt:  
> „Unser Gateway schickt **TAC 14** als JSON“  
> meint er:  
> „Wir liefern die Messwerte des fachlichen Use-Case **TAF 14** im dafür definierten JSON-Container.“

**Kurzform:**  
_TAF = Use-Case-Nummer, TAC = Daten­container für genau diesen Use Case._


## Gateway-ACK
**ACK** ist die Kurzform von **Acknowledge / Acknowledgement** – also einer Bestätigung, dass ein Telegramm oder Befehl erfolgreich **empfangen, verstanden und (soweit gefordert) ausgeführt** wurde.
Im Umfeld des Smart-Meter-Gateway (SMGW) nimmt die ACK-Botschaft je nach Protokoll eine leicht andere Form an:

|Ebene|Typisches Medium|Beispiel-ACK|Was wird bestätigt?|
|---|---|---|---|
|**HTTP-REST (WAN)**|HTTP-Status + optionales JSON|`HTTP/1.1 201 Created` + JSON‐Body `{ "status":"applied" }`|Ein _ControlMessage_ wurde angenommen – Vorgabe in FNN-Mikroprozesse für `POST /smgw/control`|
|**Control-ACK-Resource**|separater REST-Aufruf|`POST /smgw/control-ack` mit Payload `{"cid":"123","result":"ok"}`|Gateway meldet explizit, dass der Befehl mit der Correlation-ID 123 ausgeführt wurde (TR-03109-5, CLS)|
|**IEC 61850 GOOSE / MMS**|Feld `stNum/seqNum` oder MMS-`Confirm`‐PDU|neue Sequence-Nummer → Empfänger weiß, dass der vorherige Frame ankam|Schutz-/Schaltbefehl wurde empfangen (Stations-Ebene)|
|**TLS / TCP-ACK**|Transport-Protokoll|TCP-ACK-Flag|Nur garantiert, dass das Paket an der Socket-Schicht ankam – _nicht_, dass der Inhalt verarbeitet wurde|

### Warum ist das wichtig?
1. **Verlässliche Steuerung:** Ohne Gateway-ACK kann der Absender (z. B. VNB-SCADA) nicht wissen, ob ein Lastabwurf- oder Schaltbefehl tatsächlich wirksam wurde.
2. **Retransmission-Logik:** TR-03109-5 bzw. FNN-Spezifikationen verlangen, dass der Absender bei ausbleibender Bestätigung noch × mal wiederholt – dafür braucht man eine definierte ACK-Frist.
3. **Audit / Nachweis:** Das Protokoll des Gateway-ACK dient als Beleg gegenüber Regulierer oder Marktpartnern, dass Pflichthandlungen (Redispatch, §14a-Steuerung …) ausgeführt wurden.